trigger:
  branches:
    include:
      - master
  paths:
    exclude:
      - 'README.md'
      - 'notes.md'

pool:
  name: default
  demands: AVX

steps:
  - task: VSBuild@1
    name: Build
    inputs:
      solution: '**\*.sln'
      platform: 'x64'
      msbuildArchitecture: 'x64'
      configuration: release
  - task: VSTest@2
    name: Test
    inputs:
      testSelector: 'testAssemblies'
      testAssemblyVer2: |
        **\*.Test.dll
        !**\*TestAdapter.dll
        !**\obj\**
      searchFolder: '$(System.DefaultWorkingDirectory)'
